<!DOCTYPE html>
<html>
  
  <head>
    <meta charset="UTF-8">
    <title>欢迎页面-X-admin2.0</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" />
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="../css/font.css">
    <link rel="stylesheet" href="../css/xadmin.css">
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="../lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="../js/xadmin.js"></script>
	<script type="text/javascript" src="../js/global.js"></script>
  </head>
  
  <body>
    <div class="x-body">
        <form class="layui-form" id="employeeAdd">
		 
		  <div class="layui-form-item">
			   <input type="hidden" id="token"/>
		      <label for="employeeName" class="layui-form-label">
		          <span class="x-red">*</span>员工姓名
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="employeeName" name="employeeName" required="" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="employeeSex" class="layui-form-label">
		          <span class="x-red">*</span>性别
		      </label>
		      <div class="layui-input-inline">
		          <select id="employeeSex" name="employeeSex" class="valid">
		            <option value="">--请选择--</option>
					<option value="男">男</option>
		            <option value="女">女</option>
		          </select>
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="employeeAge" class="layui-form-label">
		          <span class="x-red">*</span>年龄
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="employeeAge" name="employeeAge" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="employeePhone" class="layui-form-label">
		          <span class="x-red">*</span>手机号
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="employeePhone" name="employeePhone" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="identityCard" class="layui-form-label">
		          <span class="x-red">*</span>身份证号
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="identityCard" name="identityCard" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="address" class="layui-form-label">
		          <span class="x-red">*</span>地址
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="address" name="address" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="speciality" class="layui-form-label">
		          <span class="x-red">*</span>专业
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="speciality" name="speciality" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="salary" class="layui-form-label">
		          <span class="x-red">*</span>基本工资
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="salary" name="salary" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="jiXiaoSalary" class="layui-form-label">
		          <span class="x-red">*</span>绩效工资
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="jiXiaoSalary" name="jiXiaoSalary" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="reward" class="layui-form-label">
		          <span class="x-red">*</span>奖金
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="reward" name="reward" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		 
		  <div class="layui-form-item">
		      <label for="birthday" class="layui-form-label">
		          <span class="x-red">*</span>生日
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="birthday" name="birthday" required="required"
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="email" class="layui-form-label">
		          邮箱
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="email" name="email" 
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		 
		  <div class="layui-form-item">
		      <label for="departNo" class="layui-form-label">
		          所属部门
		      </label>
		      <div class="layui-inline">
				  <select id="departNo" lay-verify="type" name="departNo">
				  </select>
		      </div>
		  </div> 
		  <div class="layui-form-item">
		      <label for="remark" class="layui-form-label">
		          备注
		      </label>
		      <div class="layui-input-inline">
		          <input type="text" id="remark" name="remark" 
		          autocomplete="off" class="layui-input">
		      </div>
		  </div>
		  <div class="layui-form-item">
		      <label for="L_repass" class="layui-form-label">
		      </label>
		      <button  class="layui-btn" lay-filter="add" lay-submit="" type="submit">
		          增加
		      </button>
		  </div> 
      </form>
    </div>
	<script type="text/javascript">
		layui.use('laydate', function(){
		  var laydate = layui.laydate;
			//执行一个laydate实例
			laydate.render({
			  elem: '#hiredate' ,//指定元素
			  type: 'datetime'
			});
			//执行一个laydate实例
			laydate.render({
			  elem: '#birthday' ,//指定元素
			  type: 'datetime'
			});
		});
		/* 动态部门 */
		/* $(function(){
			$.post(globalData.server+"departments/findAll", {}, function (res) {
			                if (res.length> 0) {
			                    $("#departNo").append("<option value=''>--请选择--</option>");
			                    for (var i = 0; i < res.length; i++) {
			                        var item = res[i];
			                        $("<option value=" + item.departNo + ">" + item.departName + "</option>").appendTo($("#departNo"));
			                        form.render();
			                    }
			                }
			            }, 'json');
		}) */
	</script>
    <script>
		
		var tokenId=globalData.getToken();
		$(function(){
			$("#token").val(tokenId);
		})
        layui.use(['form','layer'], function(){
          $ = layui.jquery;
          var form = layui.form,layer = layui.layer;
          //监听提交
          form.on('submit(add)',function(data){
			$.post(globalData.server+"/employee/insertEmployee",$("#employeeAdd").serialize(),function(res){
			    if(res==true){
					console.log(data);
					//发异步，把数据提交给php
					layer.alert("增加成功", {icon: 6},function () {
					    // 获得frame索引
					    var index = parent.layer.getFrameIndex(window.name);
					    //关闭当前frame
					    parent.layer.close(index);
						parent.location.reload();
					});
			    }else{
			        console.log(data);
			        //发异步，把数据提交给php
			        layer.alert("增加失败", {icon: 5},function () {
			            // 获得frame索引
			            var index = parent.layer.getFrameIndex(window.name);
			            //关闭当前frame
			            parent.layer.close(index);
			        });
			    }
			},'json');
			return false;
          }); 
        });
    </script>
  </body>

</html>